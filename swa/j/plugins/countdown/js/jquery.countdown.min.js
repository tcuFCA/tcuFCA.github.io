!function(e){e.fn.countdown=function(t,n){function a(e,t){return function(){return t.call(e)}}var o=["seconds","minutes","hours","days","weeks","daysLeft"];return this.each(function(){function r(){d--,0>d&&(d=0),f={seconds:d%60,minutes:Math.floor(d/60)%60,hours:Math.floor(d/60/60)%24,days:Math.floor(d/60/60/24),weeks:Math.floor(d/60/60/24/7),daysLeft:Math.floor(d/60/60/24)%7};for(var e=0;e<o.length;e++){var t=o[e];c[t]!=f[t]&&(c[t]=f[t],u(t))}0==d&&(s(),u("finished"))}function u(a){var o=e.Event(a);switch(o.date=new Date((new Date).valueOf()+d),o.value=c[a]||"0",o.toDate=t,o.lasting=f,a){case"seconds":case"minutes":case"hours":o.value=o.value<10?"0"+o.value.toString():o.value.toString();break;default:o.value&&(o.value=o.value.toString())}n.call(l,o)}function s(){clearInterval(v)}function i(){l.data("countdownInterval",setInterval(a(l,r),1e3)),v=l.data("countdownInterval")}if(!(t instanceof Date))if(String(t).match(/^[0-9]*$/))t=new Date(t);else if(t.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{2,4})\s([0-9]{1,2})\:([0-9]{2})\:([0-9]{2})/)||t.match(/([0-9]{2,4})\/([0-9]{1,2})\/([0-9]{1,2})\s([0-9]{1,2})\:([0-9]{2})\:([0-9]{2})/))t=new Date(t);else{if(!t.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{2,4})/)&&!t.match(/([0-9]{2,4})\/([0-9]{1,2})\/([0-9]{1,2})/))throw new Error("Doesn't seen to be a valid date object or string");t=new Date(t)}var l=e(this),c={},f={},v=l.data("countdownInterval"),h=new Date,d=Math.floor((t.valueOf()-h.valueOf())/1e3);r(),l.bind("remove",function(){s(),u("removed")}),v&&s(),i()})};var t=new e.Event("remove"),n=e.fn.remove;e.fn.remove=function(){return e(this).trigger(t),n.apply(this,arguments)}}(jQuery);
